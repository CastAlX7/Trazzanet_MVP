<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Acceso Seguro ‚Äì TrazzaNet Blockchain</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fuentes e Iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    
    <!-- Configuraci√≥n Tailwind personalizada -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                    },
                    colors: {
                        trazza: {
                            base: '#022c22',    // Fondo oscuro
                            glass: 'rgba(255, 255, 255, 0.03)', // Cristal base
                            border: 'rgba(255, 255, 255, 0.08)', // Bordes sutiles
                            accent: '#10B981',  // Verde Esmeralda (Principal)
                            glow: '#34D399',    // Verde Luz (Brillo)
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 8s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0) rotate(0deg)' },
                            '50%': { transform: 'translateY(-15px) rotate(2deg)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            /* Fondo profundo con gradientes sutiles para dar profundidad */
            background-color: #011c16;
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(16, 185, 129, 0.15) 0%, transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(5, 150, 105, 0.1) 0%, transparent 25%);
            overflow: hidden; /* Evita scrollbars innecesarios por efectos decorativos */
        }

        /* --- Glassmorphism Avanzado --- */
        .glass-panel {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.07) 0%, rgba(255, 255, 255, 0.02) 100%);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 
                0 4px 24px -1px rgba(0, 0, 0, 0.25),
                0 0 0 1px rgba(255, 255, 255, 0.02) inset; /* Borde interior de luz */
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        /* Efecto Hover en el Panel Principal */
        .glass-panel:hover {
            transform: translateY(-5px) scale(1.005);
            box-shadow: 
                0 20px 40px -5px rgba(0, 0, 0, 0.4),
                0 0 0 1px rgba(16, 185, 129, 0.3) inset; /* El borde brilla verde al hacer hover */
            border-color: rgba(16, 185, 129, 0.2);
        }

        /* Inputs Estilizados */
        .tech-input {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            transition: all 0.3s ease;
        }

        .tech-input:focus {
            background: rgba(0, 0, 0, 0.4);
            border-color: #10B981;
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.15);
            outline: none;
        }

        .tech-input::placeholder {
            color: rgba(255, 255, 255, 0.3);
            font-size: 0.9em;
        }

        /* Bot√≥n con gradiente animado */
        .btn-glow {
            background-size: 200% auto;
            background-image: linear-gradient(to right, #059669 0%, #10B981 51%, #059669 100%);
            transition: 0.5s;
        }
        .btn-glow:hover {
            background-position: right center;
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.4);
        }

        /* Decoraci√≥n de fondo */
        .grid-bg {
            position: absolute;
            width: 200%;
            height: 200%;
            top: -50%;
            left: -50%;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            transform: perspective(500px) rotateX(60deg);
            z-index: -1;
            pointer-events: none;
        }
    </style>
</head>

<body class="min-h-screen flex items-center justify-center p-4 relative">

    <!-- Fondo de Malla Tecnol√≥gica -->
    <div class="grid-bg"></div>

    <!-- Elementos Flotantes (Nodos Blockchain) -->
    <div class="absolute top-20 left-20 w-32 h-32 bg-emerald-500/10 rounded-full blur-3xl animate-pulse-slow"></div>
    <div class="absolute bottom-20 right-20 w-64 h-64 bg-teal-600/10 rounded-full blur-3xl animate-pulse-slow" style="animation-delay: 1s;"></div>

    <!-- Contenedor Principal (Tarjeta Glass) -->
    <main class="w-full max-w-5xl h-[600px] flex rounded-3xl overflow-hidden glass-panel relative z-10">
        
        <!-- SECCI√ìN IZQUIERDA: Branding Visual -->
        <section class="hidden md:flex w-5/12 relative flex-col justify-between p-12 overflow-hidden group">
            <!-- Capa de oscurecimiento suave para legibilidad -->
            <div class="absolute inset-0 bg-gradient-to-b from-emerald-900/40 to-black/60 z-0"></div>
            
            <!-- Imagen de fondo conceptual (Campo/Tech) - Usando degradado CSS para no depender de URLs externas -->
            <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1599827050186-b480c5a7536e?q=80&w=2000&auto=format&fit=crop')] bg-cover bg-center opacity-40 mix-blend-overlay transition-transform duration-1000 group-hover:scale-110 z-[-1]"></div>

            <!-- Header Branding -->
            <div class="relative z-10">
                <!-- Logo TrazzaNet Vectorial -->
                <div class="flex items-center gap-3 mb-6">
                    <svg class="w-12 h-12 text-emerald-400 drop-shadow-[0_0_10px_rgba(16,185,129,0.5)]" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M50 8 L88 28 V72 L50 92 L12 72 V28 L50 8Z" stroke="currentColor" stroke-width="6" fill="rgba(16,185,129,0.1)"/>
                        <circle cx="50" cy="50" r="10" fill="currentColor"/>
                        <path d="M50 20 V35" stroke="currentColor" stroke-width="3"/>
                        <path d="M25 65 L37 57" stroke="currentColor" stroke-width="3"/>
                        <path d="M75 65 L63 57" stroke="currentColor" stroke-width="3"/>
                    </svg>
                    <div>
                        <h1 class="text-3xl font-bold text-white tracking-wide">Trazza<span class="text-emerald-400">Net</span></h1>
                        <p class="text-[10px] text-emerald-200/80 uppercase tracking-[0.2em] font-medium">Blockchain System</p>
                    </div>
                </div>
            </div>

            <!-- Contenido Central Izquierda -->
            <div class="relative z-10 space-y-6">
                <div class="glass-panel p-6 rounded-2xl border-l-4 border-emerald-500 bg-black/20 hover:bg-black/30 transition-colors">
                    <i class="fa-solid fa-cube text-emerald-400 text-xl mb-3"></i>
                    <h3 class="text-white font-semibold text-lg mb-1">Inmutabilidad Garantizada</h3>
                    <p class="text-gray-300 text-xs leading-relaxed">
                        Cada lote de producci√≥n es registrado en nodos distribuidos, asegurando que la historia de sus alimentos nunca pueda ser alterada.
                    </p>
                </div>
                
                <!-- Peque√±os badges de estatus -->
                <div class="flex items-center gap-4 text-xs font-mono text-emerald-400/80">
                    <span class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span> Network Active</span>
                    <span class="flex items-center gap-2"><i class="fa-solid fa-shield-halved"></i> Verified</span>
                </div>
            </div>

            <!-- Footer Izquierda -->
            <div class="relative z-10 text-xs text-gray-400">
                <p>¬© 2025 TrazzaNet Platform.</p>
                <p>v3.4.2 Stable Release</p>
            </div>
        </section>

        <!-- SECCI√ìN DERECHA: Formulario de Login -->
        <section class="w-full md:w-7/12 bg-black/20 backdrop-blur-xl p-10 md:p-14 flex flex-col justify-center relative">
            
            <!-- Decoraci√≥n sutil esquina superior derecha -->
            <div class="absolute top-0 right-0 p-6">
                <div class="flex gap-2">
                    <div class="w-3 h-3 rounded-full bg-red-500/20 border border-red-500/50"></div>
                    <div class="w-3 h-3 rounded-full bg-yellow-500/20 border border-yellow-500/50"></div>
                    <div class="w-3 h-3 rounded-full bg-green-500/20 border border-green-500/50"></div>
                </div>
            </div>

            <div class="max-w-md mx-auto w-full">
                <div class="mb-10 text-center md:text-left">
                    <h2 class="text-3xl font-bold text-white mb-2">Iniciar Sesi√≥n</h2>
                    <p class="text-gray-400 text-sm">Ingrese sus credenciales corporativas para acceder al Ledger.</p>
                </div>

                <form id="login-form" class="space-y-5">
                    
                    <!-- Campo RUC -->
                    <div class="group">
                        <label class="block text-xs font-medium text-emerald-500 mb-2 ml-1" for="ruc">
                            <i class="fa-regular fa-building mr-1"></i> RUC EMPRESA
                        </label>
                        <div class="relative">
                            <input type="text" id="ruc" 
                                class="w-full tech-input rounded-xl px-4 py-3.5 pl-10 text-sm font-mono tracking-wider focus:ring-0" 
                                placeholder="20601234567" maxlength="11" autocomplete="off">
                            <i class="fa-solid fa-hashtag absolute left-3.5 top-3.5 text-gray-500 transition-colors group-focus-within:text-emerald-400 text-xs"></i>
                        </div>
                    </div>

                    <!-- Campo Usuario -->
                    <div class="group">
                        <label class="block text-xs font-medium text-emerald-500 mb-2 ml-1" for="user">
                            <i class="fa-regular fa-user mr-1"></i> USUARIO ADMINISTRADOR
                        </label>
                        <div class="relative">
                            <input type="text" id="user" 
                                class="w-full tech-input rounded-xl px-4 py-3.5 pl-10 text-sm focus:ring-0" 
                                placeholder="admin">
                            <i class="fa-solid fa-user-astronaut absolute left-3.5 top-3.5 text-gray-500 transition-colors group-focus-within:text-emerald-400 text-xs"></i>
                        </div>
                    </div>

                    <!-- Campo Password -->
                    <div class="group">
                        <label class="block text-xs font-medium text-emerald-500 mb-2 ml-1" for="pass">
                            <i class="fa-solid fa-key mr-1"></i> CONTRASE√ëA
                        </label>
                        <div class="relative">
                            <input type="password" id="pass" 
                                class="w-full tech-input rounded-xl px-4 py-3.5 pl-10 text-sm focus:ring-0" 
                                placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                            <i class="fa-solid fa-fingerprint absolute left-3.5 top-3.5 text-gray-500 transition-colors group-focus-within:text-emerald-400 text-xs"></i>
                        </div>
                    </div>

                    <!-- Acciones Extra -->
                    <div class="flex justify-between items-center text-xs text-gray-400 pt-2">
                        <label class="flex items-center gap-2 cursor-pointer hover:text-white transition-colors">
                            <input type="checkbox" class="accent-emerald-500 rounded bg-gray-800 border-gray-700">
                            Recordarme
                        </label>
                        <a href="#" class="hover:text-emerald-400 transition-colors underline decoration-dotted">¬øRecuperar acceso?</a>
                    </div>

                    <!-- Bot√≥n Principal -->
                    <button type="submit" 
                        class="w-full btn-glow text-white font-bold py-4 rounded-xl mt-6 shadow-lg flex items-center justify-center gap-3 group relative overflow-hidden">
                        <span class="relative z-10">Conectar al Sistema</span>
                        <i class="fa-solid fa-arrow-right relative z-10 group-hover:translate-x-1 transition-transform"></i>
                        <!-- Efecto de brillo interior -->
                        <div class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300 rounded-xl blur-md"></div>
                    </button>
                </form>

                <!-- Mensaje de Estado -->
                <div id="status-msg" class="hidden mt-6 p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-200 text-xs flex items-center gap-3 animate-pulse">
                    <i class="fa-solid fa-circle-xmark"></i>
                    <span id="msg-text">Error de conexi√≥n con el nodo.</span>
                </div>
            </div>
        </section>
    </main>

    <!-- Script de Funcionalidad -->

    <script>
    const SESSION_KEY = 'trazanet_session';

    // Al cargar la p√°gina: si ya hay sesi√≥n, manda directo al dashboard
    window.addEventListener('DOMContentLoaded', () => {
        const existingSession =
            localStorage.getItem(SESSION_KEY) ||
            sessionStorage.getItem(SESSION_KEY);

        if (existingSession) {
            try {
                const session = JSON.parse(existingSession);
                // Si quieres, puedes validar algo del session (ej. username)
                if (session && session.username) {
                    window.location.href = 'dashboard.html';
                    return;
                }
            } catch (e) {
                // Si algo falla al parsear, limpiamos
                localStorage.removeItem(SESSION_KEY);
                sessionStorage.removeItem(SESSION_KEY);
            }
        }

        // Si no hay sesi√≥n, dejamos el formulario listo
        initLoginForm();
    });

    function initLoginForm() {
        const form = document.getElementById('loginForm');
        const errorBox = document.getElementById('login-error');
        const errorText = document.getElementById('login-error-text');

        if (!form) return;

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const ruc = document.getElementById('ruc').value.trim();
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            const role = document.getElementById('role').value;
            const remember = document.getElementById('rememberMe').checked;

            if (!ruc || !username || !password) {
                errorBox.classList.remove('d-none');
                errorText.textContent = 'Completa todos los campos para continuar.';
                return;
            }

            // üîê OPCI√ìN A: solo demo (no valida en backend)
            // Deja esto en true mientras no tengas API de login real
            const demoMode = true;

            if (demoMode) {
                saveSession({ ruc, username, role });
                return;
            }

            // üîê OPCI√ìN B: login REAL contra backend (cuando tengas endpoint)
            try {
                const resp = await fetch('/api/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ ruc, username, password })
                });

                if (!resp.ok) {
                    throw new Error('Credenciales inv√°lidas');
                }

                const data = await resp.json();
                // Ajusta estos campos seg√∫n lo que devuelva tu backend
                saveSession({
                    ruc,
                    username,
                    role,
                    token: data.token
                }, remember);

            } catch (err) {
                console.error(err);
                errorBox.classList.remove('d-none');
                errorText.textContent = 'Credenciales inv√°lidas o error de conexi√≥n.';
            }
        });
    }

    function saveSession(payload, remember = true) {
        const errorBox = document.getElementById('login-error');
        if (errorBox) errorBox.classList.add('d-none');

        const sessionData = {
            ...payload,
            loginTime: new Date().toISOString()
        };

        const json = JSON.stringify(sessionData);

        if (remember) {
            localStorage.setItem(SESSION_KEY, json);
        } else {
            sessionStorage.setItem(SESSION_KEY, json);
        }

        // Redirigir al dashboard
        window.location.href = 'dashboard.html';
    }
    </script>        
    
</body>
</html>